{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Todo List</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
    crossorigin="anonymous"
  />
</head>

<body>
<div class="container mt-4">
  <h1 class="text-center mb-4">ToDo List</h1>

  <a href="" class="btn btn-primary mb-3">Add Task</a>

  <ul class="list-group">
    {% for todo_item in todo_items %}
      <li class="list-group-item">
        <div class="d-flex justify-content-between align-items-start">

          <!-- LEFT CONTENT -->
          <div>
            <strong>{{ todo_item.title }}</strong><br>
            <span>{{ todo_item.description }}</span>

            {% if todo_item.completed %}
              <span class="badge bg-success ms-2">Completed</span>
            {% else %}
              <span class="badge bg-warning text-dark ms-2">Pending</span>
            {% endif %}

            <!-- STEPS SECTION (FIXED POSITION) -->
            {% if todo_item.steps %}
              <ul class="mt-2 ps-3">
                {% for step in todo_item.steps %}
                  <li>{{ step }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>

          <!-- ACTION BUTTONS -->
          <div>
            <a href="{% url 'complete_todo' todo_item.id %}"
               class="btn btn-success btn-sm mb-1">
              Complete
            </a>
            <a href="{% url 'delete_todo' todo_item.id %}"
               class="btn btn-danger btn-sm">
              Delete
            </a>
          </div>

        </div>
      </li>
    {% empty %}
      <li class="list-group-item text-center text-muted">
        No tasks found
      </li>
    {% endfor %}
  </ul>

</div>
</body>
</html>